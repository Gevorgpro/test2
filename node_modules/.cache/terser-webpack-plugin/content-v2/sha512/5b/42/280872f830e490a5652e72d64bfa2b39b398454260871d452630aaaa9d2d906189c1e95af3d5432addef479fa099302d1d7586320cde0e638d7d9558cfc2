{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{Wrxl:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var core=__webpack_require__(\"8Y7J\");class ChatPageModule{}var router_ngfactory=__webpack_require__(\"pMnS\"),core_ngfactory=__webpack_require__(\"oBZk\"),fesm5=__webpack_require__(\"ZZ/e\"),common=__webpack_require__(\"SVse\");class ChatBubbleComponent{constructor(events){this.events=events,this.message={},this.allMessage=[],this.image=!1}ngOnInit(){}scrollToBottom(){this.events.publish(\"scrollToBottom\")}getClass(message,user){let index=this.allMessage.indexOf(message);return message.sender==user?this.allMessage[index+1]&&this.allMessage[index].sender==this.allMessage[index+1].sender?\"rightb\":\"right\":this.allMessage[index+1]&&this.allMessage[index].receiver==this.allMessage[index+1].receiver?\"leftb\":\"left\"}}var RenderType_ChatBubbleComponent=core.Ab({encapsulation:0,styles:[['@charset \"UTF-8\";img.profile-pic[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;position:absolute;bottom:15px}img.profile-pic.left[_ngcontent-%COMP%]{left:10px}img.profile-pic.right[_ngcontent-%COMP%]{right:10px}.message[_ngcontent-%COMP%]{word-wrap:break-word;white-space:pre-wrap;font-size:16px}.message-detail[_ngcontent-%COMP%]{white-space:nowrap;font-size:14px}.chat-bubble[_ngcontent-%COMP%]{border-radius:5px;display:inline-block;padding:6px 18px;position:relative;margin:7px 5px 10px;max-width:80%;font-size:14px}.chat-bubble[_ngcontent-%COMP%]:before{content:\"Â \";display:block;height:16px;width:9px;position:absolute;bottom:-7.5px}.chat-bubble.left[_ngcontent-%COMP%]{background-color:#f6f6f6;float:left;color:#2574a9;margin-bottom:35px}.chat-bubble.leftb[_ngcontent-%COMP%]{background-color:#f6f6f6;float:left;color:#2574a9}.chat-bubble.left[_ngcontent-%COMP%]:before{background-color:#f6f6f6;left:10px;-webkit-transform:rotate(65deg) skew(5deg)}.chat-bubble.right[_ngcontent-%COMP%]{background-color:#ccc;color:#000;float:right;margin-bottom:35px}.chat-bubble.rightb[_ngcontent-%COMP%]{background-color:#ccc;color:#000;float:right}.chat-bubble.right[_ngcontent-%COMP%]:before{background-color:#ccc;right:10px;-webkit-transform:rotate(115deg) skew(-5deg)}.chat-bubble.right[_ngcontent-%COMP%]   a.autolinker[_ngcontent-%COMP%]{color:#000;font-weight:700}.time[_ngcontent-%COMP%]{float:right;padding:5px;font-size:12px;color:#777}.label-md[_ngcontent-%COMP%]{margin:0!important}']],data:{}});function View_ChatBubbleComponent_1(_l){return core.Xb(0,[(_l()(),core.Cb(0,0,null,null,4,\"div\",[[\"class\",\"message\"]],null,null,null,null,null)),(_l()(),core.Vb(1,null,[\"\",\"\"])),(_l()(),core.Cb(2,0,null,null,2,\"div\",[[\"class\",\"time\"]],null,null,null,null,null)),(_l()(),core.Vb(3,null,[\"\",\"\"])),core.Rb(4,2)],null,(function(_ck,_v){var _co=_v.component;_ck(_v,1,0,_co.message.body);var currVal_1=core.Wb(_v,3,0,_ck(_v,4,0,core.Ob(_v.parent,0),_co.message.createdAt.toDate(),\" hh:mm a\"));_ck(_v,3,0,currVal_1)}))}function View_ChatBubbleComponent_2(_l){return core.Xb(0,[(_l()(),core.Cb(0,0,null,null,4,\"div\",[[\"class\",\"message\"]],null,null,null,null,null)),(_l()(),core.Cb(1,0,null,null,0,\"img\",[[\"imageViewer\",\"\"]],[[8,\"src\",4]],[[null,\"load\"]],(function(_v,en,$event){var ad=!0;return\"load\"===en&&(ad=!1!==_v.component.scrollToBottom()&&ad),ad}),null,null)),(_l()(),core.Cb(2,0,null,null,2,\"div\",[[\"class\",\"time\"]],null,null,null,null,null)),(_l()(),core.Vb(3,null,[\"\",\"\"])),core.Rb(4,2)],null,(function(_ck,_v){var _co=_v.component;_ck(_v,1,0,core.Gb(1,\"\",_co.message.body,\"\"));var currVal_1=core.Wb(_v,3,0,_ck(_v,4,0,core.Ob(_v.parent,0),_co.message.createdAt.toDate(),\" hh:mm a\"));_ck(_v,3,0,currVal_1)}))}function View_ChatBubbleComponent_0(_l){return core.Xb(0,[core.Pb(0,common.d,[core.z]),(_l()(),core.Cb(1,0,null,null,5,\"div\",[[\"class\",\"chatBubble\"]],null,null,null,null,null)),(_l()(),core.Cb(2,0,null,null,4,\"div\",[],[[8,\"className\",0]],null,null,null,null)),(_l()(),core.rb(16777216,null,null,1,null,View_ChatBubbleComponent_1)),core.Bb(4,16384,null,0,common.k,[core.X,core.S],{ngIf:[0,\"ngIf\"]},null),(_l()(),core.rb(16777216,null,null,1,null,View_ChatBubbleComponent_2)),core.Bb(6,16384,null,0,common.k,[core.X,core.S],{ngIf:[0,\"ngIf\"]},null)],(function(_ck,_v){var _co=_v.component;_ck(_v,4,0,_co.message.body.indexOf(\".gif\")<0),_ck(_v,6,0,_co.message.body.indexOf(\".gif\")>-1)}),(function(_ck,_v){var _co=_v.component;_ck(_v,2,0,core.Gb(1,\"chat-bubble \",_co.getClass(_co.message,_co.user),\"\"))}))}function View_ChatBubbleComponent_Host_0(_l){return core.Xb(0,[(_l()(),core.Cb(0,0,null,null,1,\"app-chat-bubble\",[],null,null,null,View_ChatBubbleComponent_0,RenderType_ChatBubbleComponent)),core.Bb(1,114688,null,0,ChatBubbleComponent,[fesm5.f],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var ChatBubbleComponentNgFactory=core.yb(\"app-chat-bubble\",ChatBubbleComponent,View_ChatBubbleComponent_Host_0,{message:\"message\",allMessage:\"allMessage\",user:\"user\"},{},[]),fesm2015_forms=__webpack_require__(\"s7LF\"),user_service=__webpack_require__(\"CFL1\"),messages_service=__webpack_require__(\"Gqy7\"),ngx=__webpack_require__(\"Zr1d\");class ChatPage{constructor(userService,platform,keyboard,ngZone,messagesService){this.userService=userService,this.platform=platform,this.keyboard=keyboard,this.ngZone=ngZone,this.messagesService=messagesService,this.messages=[],this.receiver={},this.sender={},this.editorMsg=\"\",this.messagesFire=[],this.firstMessage=!1,this.messageFired=!1,this.keys=[],this.grouped={},this.chatBg=\"assets/imgs/chatbg.jpg\",this.userService.currentUser.subscribe(user=>{this.user=user})}ngOnInit(){let cid=this.platform.getQueryParam(\"cid\");this.uid=this.platform.getQueryParam(\"uid\"),this.name=this.platform.getQueryParam(\"name\"),this.messagesService.getMessages(cid),this.messagesService.messageSeen(cid);let that=this;this.messagesService.messages.subscribe(data=>{this.grouped=data.messages,this.keys=data.keys,this.ngZone.run(()=>{setTimeout(()=>{that.ionContent.scrollToBottom(300)})})})}getDate(date){return new Date(date)}ionViewDidLoad(){}resize(){}sendMsg(){this.keyboard.show(),this.myInput.setFocus(),console.log(\"keyboard show\"),0!=this.editorMsg.length&&(this.messagesService.sendMsg(this.editorMsg,this.uid),this.editorMsg=\"\",this.myInput.setFocus(),this.ionContent.scrollToBottom(300))}sendNotification(data){}scrollToBottom(){}textChange(){}}var RenderType_ChatPage=core.Ab({encapsulation:0,styles:[[\"ion-content[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]{--ion-background-color:transparent}.chatPage[_ngcontent-%COMP%]{position:absolute;top:25px;left:140px;color:#ccc;font-size:18px;text-transform:capitalize}.chatBackground[_ngcontent-%COMP%]{background-size:cover}.text-input-ios[_ngcontent-%COMP%], .text-input-md[_ngcontent-%COMP%]{text-align:left!important;font-size:17px}.list-header-ios[_ngcontent-%COMP%], .list-header-md[_ngcontent-%COMP%]{padding-left:16px;margin-bottom:13px;min-height:4.5rem;border-top:1px solid #dedede;font-size:2.4rem;color:#fff;background:0 0}.label-ios[_ngcontent-%COMP%], .label-md[_ngcontent-%COMP%]{margin:0!important}.item-ios[_ngcontent-%COMP%], .item-md[_ngcontent-%COMP%]{margin-top:-13px!important}.item-ios.item-block[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%], .item-md.item-block[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{border:none}ion-footer[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0}button[_ngcontent-%COMP%]{background:0 0;font-size:33px}\"]],data:{}});function View_ChatPage_2(_l){return core.Xb(0,[(_l()(),core.Cb(0,0,null,null,3,\"ion-item\",[[\"lines\",\"none\"],[\"style\",\"background:transparent;\"]],null,null,null,core_ngfactory.fb,core_ngfactory.q)),core.Bb(1,49152,null,0,fesm5.J,[core.j,core.p,core.F],{lines:[0,\"lines\"]},null),(_l()(),core.Cb(2,0,null,0,1,\"app-chat-bubble\",[[\"style\",\"width: 100%;\"]],null,null,null,View_ChatBubbleComponent_0,RenderType_ChatBubbleComponent)),core.Bb(3,114688,null,0,ChatBubbleComponent,[fesm5.f],{message:[0,\"message\"],allMessage:[1,\"allMessage\"],user:[2,\"user\"]},null)],(function(_ck,_v){var _co=_v.component;_ck(_v,1,0,\"none\"),_ck(_v,3,0,_v.context.$implicit,_co.grouped[_v.parent.context.$implicit],_co.user.uid)}),null)}function View_ChatPage_1(_l){return core.Xb(0,[(_l()(),core.Cb(0,0,null,null,6,\"div\",[],null,null,null,null,null)),(_l()(),core.Cb(1,0,null,null,3,\"ion-item-divider\",[[\"color\",\"light\"],[\"sticky\",\"\"],[\"style\",\"margin-bottom:35px;text-align: center;opacity: 0.5;\"]],null,null,null,core_ngfactory.db,core_ngfactory.r)),core.Bb(2,49152,null,0,fesm5.K,[core.j,core.p,core.F],{color:[0,\"color\"],sticky:[1,\"sticky\"]},null),(_l()(),core.Vb(3,0,[\"\",\"\"])),core.Rb(4,2),(_l()(),core.rb(16777216,null,null,1,null,View_ChatPage_2)),core.Bb(6,278528,null,0,common.j,[core.X,core.S,core.x],{ngForOf:[0,\"ngForOf\"]},null)],(function(_ck,_v){var _co=_v.component;_ck(_v,2,0,\"light\",\"\"),_ck(_v,6,0,_co.grouped[_v.context.$implicit])}),(function(_ck,_v){var _co=_v.component,currVal_2=core.Wb(_v,3,0,_ck(_v,4,0,core.Ob(_v.parent,0),_co.getDate(_v.context.$implicit),\"dd MMMM, yyyy\"));_ck(_v,3,0,currVal_2)}))}function View_ChatPage_0(_l){return core.Xb(0,[core.Pb(0,common.d,[core.z]),core.Tb(671088640,1,{ionContent:0}),core.Tb(671088640,2,{myInput:0}),(_l()(),core.Cb(3,0,null,null,11,\"ion-header\",[[\"no-border\",\"\"]],null,null,null,core_ngfactory.ab,core_ngfactory.n)),core.Bb(4,49152,null,0,fesm5.D,[core.j,core.p,core.F],null,null),(_l()(),core.Cb(5,0,null,0,9,\"ion-toolbar\",[[\"color\",\"red\"],[\"style\",\"padding-top:20px !important;\"]],null,null,null,core_ngfactory.zb,core_ngfactory.M)),core.Bb(6,49152,null,0,fesm5.Eb,[core.j,core.p,core.F],{color:[0,\"color\"]},null),(_l()(),core.Cb(7,0,null,0,4,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,core_ngfactory.R,core_ngfactory.e)),core.Bb(8,49152,null,0,fesm5.n,[core.j,core.p,core.F],null,null),(_l()(),core.Cb(9,0,null,0,2,\"ion-back-button\",[],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==core.Ob(_v,11).onClick($event)&&ad),ad}),core_ngfactory.P,core_ngfactory.c)),core.Bb(10,49152,null,0,fesm5.i,[core.j,core.p,core.F],null,null),core.Bb(11,16384,null,0,fesm5.j,[[2,fesm5.kb],fesm5.Kb],null,null),(_l()(),core.Cb(12,0,null,0,2,\"ion-title\",[],null,null,null,core_ngfactory.xb,core_ngfactory.K)),core.Bb(13,49152,null,0,fesm5.Cb,[core.j,core.p,core.F],null,null),(_l()(),core.Vb(14,0,[\"\",\"\"])),(_l()(),core.Cb(15,0,null,null,5,\"ion-content\",[[\"style\",\"background-image: url(assets/imgs/chatbg.jpg)\"]],null,null,null,core_ngfactory.U,core_ngfactory.h)),core.Bb(16,49152,[[1,4]],0,fesm5.w,[core.j,core.p,core.F],null,null),(_l()(),core.Cb(17,0,null,0,3,\"ion-item-group\",[[\"no-lines\",\"\"]],null,null,null,core_ngfactory.eb,core_ngfactory.s)),core.Bb(18,49152,null,0,fesm5.L,[core.j,core.p,core.F],null,null),(_l()(),core.rb(16777216,null,0,1,null,View_ChatPage_1)),core.Bb(20,278528,null,0,common.j,[core.X,core.S,core.x],{ngForOf:[0,\"ngForOf\"]},null),(_l()(),core.Cb(21,0,null,null,17,\"ion-footer\",[[\"no-border\",\"\"],[\"style\",\"border-top: 3px solid red;background: #ffffff;\"]],null,null,null,core_ngfactory.Y,core_ngfactory.l)),core.Bb(22,49152,null,0,fesm5.B,[core.j,core.p,core.F],null,null),(_l()(),core.Cb(23,0,null,0,15,\"ion-row\",[],null,null,null,core_ngfactory.kb,core_ngfactory.x)),core.Bb(24,49152,null,0,fesm5.lb,[core.j,core.p,core.F],null,null),(_l()(),core.Cb(25,0,null,0,8,\"ion-col\",[[\"size\",\"10\"]],null,null,null,core_ngfactory.T,core_ngfactory.g)),core.Bb(26,49152,null,0,fesm5.v,[core.j,core.p,core.F],{size:[0,\"size\"]},null),(_l()(),core.Cb(27,0,null,0,6,\"ion-textarea\",[[\"placeholder\",\"Write a message...\"],[\"rows\",\"1\"],[\"style\",\"color: #797b7e;text-align: left !important;\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"keyup\"],[null,\"ngModelChange\"],[null,\"keyup.enter\"],[null,\"ionBlur\"],[null,\"ionChange\"]],(function(_v,en,$event){var ad=!0,_co=_v.component;return\"ionBlur\"===en&&(ad=!1!==core.Ob(_v,28)._handleBlurEvent($event.target)&&ad),\"ionChange\"===en&&(ad=!1!==core.Ob(_v,28)._handleInputEvent($event.target)&&ad),\"keyup\"===en&&(ad=!1!==_co.resize()&&ad),\"ngModelChange\"===en&&(ad=!1!==(_co.editorMsg=$event)&&ad),\"keyup.enter\"===en&&(ad=!1!==_co.sendMsg()&&ad),\"ngModelChange\"===en&&(ad=!1!==_co.textChange()&&ad),ad}),core_ngfactory.wb,core_ngfactory.J)),core.Bb(28,16384,null,0,fesm5.Pb,[core.p],null,null),core.Sb(1024,null,fesm2015_forms.g,(function(p0_0){return[p0_0]}),[fesm5.Pb]),core.Bb(30,671744,null,0,fesm2015_forms.k,[[8,null],[8,null],[8,null],[6,fesm2015_forms.g]],{model:[0,\"model\"]},{update:\"ngModelChange\"}),core.Sb(2048,null,fesm2015_forms.h,null,[fesm2015_forms.k]),core.Bb(32,16384,null,0,fesm2015_forms.i,[[4,fesm2015_forms.h]],null,null),core.Bb(33,49152,[[2,4],[\"myInput\",4],[\"chat_input\",4]],0,fesm5.Ab,[core.j,core.p,core.F],{placeholder:[0,\"placeholder\"],rows:[1,\"rows\"]},null),(_l()(),core.Cb(34,0,null,0,4,\"ion-col\",[[\"size\",\"2\"]],null,null,null,core_ngfactory.T,core_ngfactory.g)),core.Bb(35,49152,null,0,fesm5.v,[core.j,core.p,core.F],{size:[0,\"size\"]},null),(_l()(),core.Cb(36,0,null,0,2,\"button\",[[\"clear\",\"\"],[\"icon-only\",\"\"],[\"ion-button\",\"\"],[\"item-right\",\"\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.sendMsg()&&ad),ad}),null,null)),(_l()(),core.Cb(37,0,null,null,1,\"ion-icon\",[[\"color\",\"valencia\"],[\"name\",\"md-send\"]],null,null,null,core_ngfactory.bb,core_ngfactory.o)),core.Bb(38,49152,null,0,fesm5.E,[core.j,core.p,core.F],{color:[0,\"color\"],name:[1,\"name\"]},null)],(function(_ck,_v){var _co=_v.component;_ck(_v,6,0,\"red\"),_ck(_v,20,0,_co.keys),_ck(_v,26,0,\"10\"),_ck(_v,30,0,_co.editorMsg),_ck(_v,33,0,\"Write a message...\",\"1\"),_ck(_v,35,0,\"2\"),_ck(_v,38,0,\"valencia\",\"md-send\")}),(function(_ck,_v){_ck(_v,14,0,_v.component.name),_ck(_v,27,0,core.Ob(_v,32).ngClassUntouched,core.Ob(_v,32).ngClassTouched,core.Ob(_v,32).ngClassPristine,core.Ob(_v,32).ngClassDirty,core.Ob(_v,32).ngClassValid,core.Ob(_v,32).ngClassInvalid,core.Ob(_v,32).ngClassPending)}))}function View_ChatPage_Host_0(_l){return core.Xb(0,[(_l()(),core.Cb(0,0,null,null,1,\"app-chat\",[],null,null,null,View_ChatPage_0,RenderType_ChatPage)),core.Bb(1,114688,null,0,ChatPage,[user_service.a,fesm5.Mb,ngx.a,core.F,messages_service.a],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var ChatPageNgFactory=core.yb(\"app-chat\",ChatPage,View_ChatPage_Host_0,{},{},[]),router=__webpack_require__(\"iInd\");class ChatPageRoutingModule{}__webpack_require__.d(__webpack_exports__,\"ChatPageModuleNgFactory\",(function(){return ChatPageModuleNgFactory}));var ChatPageModuleNgFactory=core.zb(ChatPageModule,[],(function(_l){return core.Lb([core.Mb(512,core.m,core.kb,[[8,[router_ngfactory.a,ChatPageNgFactory,ChatBubbleComponentNgFactory]],[3,core.m],core.D]),core.Mb(4608,common.m,common.l,[core.z,[2,common.z]]),core.Mb(4608,fesm2015_forms.p,fesm2015_forms.p,[]),core.Mb(4608,fesm5.b,fesm5.b,[core.F,core.g]),core.Mb(4608,fesm5.Jb,fesm5.Jb,[fesm5.b,core.m,core.w]),core.Mb(4608,fesm5.Nb,fesm5.Nb,[fesm5.b,core.m,core.w]),core.Mb(1073742336,common.b,common.b,[]),core.Mb(1073742336,fesm2015_forms.o,fesm2015_forms.o,[]),core.Mb(1073742336,fesm2015_forms.e,fesm2015_forms.e,[]),core.Mb(1073742336,fesm5.Gb,fesm5.Gb,[]),core.Mb(1073742336,router.o,router.o,[[2,router.t],[2,router.m]]),core.Mb(1073742336,ChatPageRoutingModule,ChatPageRoutingModule,[]),core.Mb(1073742336,ChatPageModule,ChatPageModule,[]),core.Mb(1024,router.k,(function(){return[[{path:\"\",component:ChatPage}]]}),[])])}))}}]);","extractedComments":[]}
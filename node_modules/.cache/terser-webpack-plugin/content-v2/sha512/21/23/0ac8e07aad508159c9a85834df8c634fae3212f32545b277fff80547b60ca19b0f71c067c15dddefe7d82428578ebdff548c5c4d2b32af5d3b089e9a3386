{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{\"22TP\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var core=__webpack_require__(\"8Y7J\");class MessagesPageModule{}var router_ngfactory=__webpack_require__(\"pMnS\"),core_ngfactory=__webpack_require__(\"oBZk\"),common=__webpack_require__(\"SVse\"),fesm5=__webpack_require__(\"ZZ/e\"),fesm2015_forms=__webpack_require__(\"s7LF\"),ngx=__webpack_require__(\"p74H\"),user_service=__webpack_require__(\"CFL1\");class MessagesPage{constructor(statusBar,userService,router){this.statusBar=statusBar,this.userService=userService,this.router=router,this.segment=\"messages\",this.user={},this.allNearbyPosts=[],this.allPosts=[],this.currentUser={},this.messages=[],this.messagesDB=[],this.realMessagesDB=[],this.blockedUsers=[],this.userService.currentUser.subscribe(user=>{this.user=user})}ngOnInit(){this.messageData()}ionViewDidLoad(){}messageData(){this.userService.messages.subscribe(messages=>{this.messagesDB=messages,this.realMessagesDB=messages,console.log(\"messages \",messages)})}getClass(post){return post.likes.indexOf(this.user.uid)>=0?\"postLiked\":\"postNotLiked\"}segmentChanged(ev){}upgrade(){}getItems(ev){let name=ev.target.value;this.messagesDB=this.realMessagesDB.filter(res=>res.name.toLowerCase().indexOf(name.toLowerCase())>=0),0==name.length&&(this.messagesDB=Array.from(this.realMessagesDB))}openChat(message){this.router.navigateByUrl(\"/chat/?cid=\"+message.id+\"&uid=\"+message.uid+\"&name=\"+message.name)}parseText(text){return text.length>50?text.substring(0,99)+\"...\":text}getBorder(message){return message.read?\"noBorder\":\"border\"}timeDifference(previous){var elapsed=(new Date).getTime()-(previous=new Date(previous).getTime());return elapsed<6e4?Math.round(elapsed/1e3)+\" secs\":elapsed<36e5?Math.round(elapsed/6e4)+\" mins\":elapsed<864e5?Math.round(elapsed/36e5)+\" hrs\":elapsed<2592e6?Math.round(elapsed/864e5)+\" days\":elapsed<31536e6?Math.round(elapsed/2592e6)+\" months\":Math.round(elapsed/31536e6)+\" years\"}}var router=__webpack_require__(\"iInd\"),RenderType_MessagesPage=core.Ab({encapsulation:0,styles:[[\".diag[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;height:76%;text-align:center}h2[_ngcontent-%COMP%]{margin-top:0!important}p[_ngcontent-%COMP%]{white-space:normal}.noBorder[_ngcontent-%COMP%]{border-left:3px solid #fff}.border[_ngcontent-%COMP%]{border-left:3px solid gray}.messageBox[_ngcontent-%COMP%]{padding:5px}.messageBox[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal}.messageBox[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:13px}.card-content-ios[_ngcontent-%COMP%], .card-content-md[_ngcontent-%COMP%]{padding:0!important;background-color:#525b56}.message[_ngcontent-%COMP%]{color:#f8f8f8!important;margin-bottom:10px;border-bottom:1px solid #ccc!important}.ptext[_ngcontent-%COMP%]{font-size:17px;line-height:20px;overflow:hidden;padding:0 20px}.ptext[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px!important;-o-object-fit:cover;object-fit:cover;border-radius:3px;width:100%;margin-top:10px;box-shadow:0 0 2px 0 rgba(0,0,0,.75)}.label-ios[_ngcontent-%COMP%], .label-md[_ngcontent-%COMP%]{margin-bottom:0}ion-card[_ngcontent-%COMP%]{box-shadow:none}.postLiked[_ngcontent-%COMP%]{color:#2574a9}.postNotLiked[_ngcontent-%COMP%]{color:#ccc}img[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;border-radius:3px!important}.feed[_ngcontent-%COMP%]{border-bottom:0 solid #ccc}\"]],data:{}});function View_MessagesPage_1(_l){return core.Xb(0,[(_l()(),core.Cb(0,0,null,null,3,\"div\",[[\"class\",\"diag\"]],null,null,null,null,null)),(_l()(),core.Cb(1,0,null,null,0,\"img\",[[\"src\",\"assets/imgs/speech-bubble.svg\"],[\"style\",\"padding: 30% 40% 0 40%;color: var(--ion-color-red);\"]],null,null,null,null,null)),(_l()(),core.Cb(2,0,null,null,1,\"p\",[[\"style\",\"color:var(--ion-color-red)\"]],null,null,null,null,null)),(_l()(),core.Vb(-1,null,[\"You have no messages!\"]))],null,null)}function View_MessagesPage_2(_l){return core.Xb(0,[(_l()(),core.Cb(0,0,null,null,15,\"ion-item\",[[\"class\",\"messageBox\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.openChat(_v.context.$implicit)&&ad),ad}),core_ngfactory.fb,core_ngfactory.q)),core.Sb(512,null,common.u,common.v,[core.x,core.y,core.p,core.K]),core.Bb(2,278528,null,0,common.i,[common.u],{klass:[0,\"klass\"],ngClass:[1,\"ngClass\"]},null),core.Bb(3,49152,null,0,fesm5.J,[core.j,core.p,core.F],null,null),(_l()(),core.Cb(4,0,null,0,2,\"ion-avatar\",[[\"slot\",\"start\"]],null,null,null,core_ngfactory.O,core_ngfactory.b)),core.Bb(5,49152,null,0,fesm5.h,[core.j,core.p,core.F],null,null),(_l()(),core.Cb(6,0,null,0,0,\"img\",[],[[8,\"src\",4]],null,null,null,null)),(_l()(),core.Cb(7,0,null,0,5,\"ion-label\",[],null,null,null,core_ngfactory.gb,core_ngfactory.t)),core.Bb(8,49152,null,0,fesm5.P,[core.j,core.p,core.F],null,null),(_l()(),core.Cb(9,0,null,0,1,\"h2\",[],null,null,null,null,null)),(_l()(),core.Vb(10,null,[\"\",\"\"])),(_l()(),core.Cb(11,0,null,0,1,\"p\",[],null,null,null,null,null)),(_l()(),core.Vb(12,null,[\"\",\"\"])),(_l()(),core.Cb(13,0,null,0,2,\"ion-note\",[[\"slot\",\"end\"]],null,null,null,core_ngfactory.ib,core_ngfactory.v)),core.Bb(14,49152,null,0,fesm5.ab,[core.j,core.p,core.F],null,null),(_l()(),core.Vb(15,0,[\" \",\" ago \"]))],(function(_ck,_v){_ck(_v,2,0,\"messageBox\",_v.component.getBorder(_v.context.$implicit))}),(function(_ck,_v){var _co=_v.component;_ck(_v,6,0,_v.context.$implicit.image),_ck(_v,10,0,_v.context.$implicit.name),_ck(_v,12,0,_v.context.$implicit.lastMessage);var currVal_5=_co.timeDifference(_v.context.$implicit.createdAt.toDate());_ck(_v,15,0,currVal_5)}))}function View_MessagesPage_0(_l){return core.Xb(0,[(_l()(),core.Cb(0,0,null,null,12,\"ion-header\",[[\"no-border\",\"\"]],null,null,null,core_ngfactory.ab,core_ngfactory.n)),core.Bb(1,49152,null,0,fesm5.D,[core.j,core.p,core.F],null,null),(_l()(),core.Cb(2,0,null,0,4,\"ion-toolbar\",[[\"color\",\"red\"],[\"style\",\"padding-top:20px !important;\"]],null,null,null,core_ngfactory.zb,core_ngfactory.M)),core.Bb(3,49152,null,0,fesm5.Eb,[core.j,core.p,core.F],{color:[0,\"color\"]},null),(_l()(),core.Cb(4,0,null,0,2,\"ion-title\",[],null,null,null,core_ngfactory.xb,core_ngfactory.K)),core.Bb(5,49152,null,0,fesm5.Cb,[core.j,core.p,core.F],null,null),(_l()(),core.Vb(-1,0,[\"Messages\"])),(_l()(),core.Cb(7,0,null,0,5,\"ion-toolbar\",[[\"color\",\"red\"],[\"mode\",\"ios\"]],null,null,null,core_ngfactory.zb,core_ngfactory.M)),core.Bb(8,49152,null,0,fesm5.Eb,[core.j,core.p,core.F],{color:[0,\"color\"],mode:[1,\"mode\"]},null),(_l()(),core.Cb(9,0,null,0,3,\"ion-searchbar\",[[\"mode\",\"ios\"],[\"showCancelButton\",\"focus\"]],null,[[null,\"ionInput\"],[null,\"ionBlur\"],[null,\"ionChange\"]],(function(_v,en,$event){var ad=!0,_co=_v.component;return\"ionBlur\"===en&&(ad=!1!==core.Ob(_v,12)._handleBlurEvent($event.target)&&ad),\"ionChange\"===en&&(ad=!1!==core.Ob(_v,12)._handleInputEvent($event.target)&&ad),\"ionInput\"===en&&(ad=!1!==_co.getItems($event)&&ad),ad}),core_ngfactory.lb,core_ngfactory.y)),core.Sb(5120,null,fesm2015_forms.g,(function(p0_0){return[p0_0]}),[fesm5.Pb]),core.Bb(11,49152,null,0,fesm5.mb,[core.j,core.p,core.F],{mode:[0,\"mode\"],showCancelButton:[1,\"showCancelButton\"]},null),core.Bb(12,16384,null,0,fesm5.Pb,[core.p],null,null),(_l()(),core.Cb(13,0,null,null,7,\"ion-content\",[],null,null,null,core_ngfactory.U,core_ngfactory.h)),core.Bb(14,49152,null,0,fesm5.w,[core.j,core.p,core.F],null,null),(_l()(),core.rb(16777216,null,0,1,null,View_MessagesPage_1)),core.Bb(16,16384,null,0,common.k,[core.X,core.S],{ngIf:[0,\"ngIf\"]},null),(_l()(),core.Cb(17,0,null,0,3,\"ion-list\",[[\"mode\",\"ios\"]],null,null,null,core_ngfactory.hb,core_ngfactory.u)),core.Bb(18,49152,null,0,fesm5.Q,[core.j,core.p,core.F],{mode:[0,\"mode\"]},null),(_l()(),core.rb(16777216,null,0,1,null,View_MessagesPage_2)),core.Bb(20,278528,null,0,common.j,[core.X,core.S,core.x],{ngForOf:[0,\"ngForOf\"]},null)],(function(_ck,_v){var _co=_v.component;_ck(_v,3,0,\"red\"),_ck(_v,8,0,\"red\",\"ios\"),_ck(_v,11,0,\"ios\",\"focus\"),_ck(_v,16,0,0==_co.messagesDB.length),_ck(_v,18,0,\"ios\"),_ck(_v,20,0,_co.messagesDB)}),null)}function View_MessagesPage_Host_0(_l){return core.Xb(0,[(_l()(),core.Cb(0,0,null,null,1,\"app-messages\",[],null,null,null,View_MessagesPage_0,RenderType_MessagesPage)),core.Bb(1,114688,null,0,MessagesPage,[ngx.a,user_service.a,router.m],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var MessagesPageNgFactory=core.yb(\"app-messages\",MessagesPage,View_MessagesPage_Host_0,{},{},[]);class MessagesPageRoutingModule{}__webpack_require__.d(__webpack_exports__,\"MessagesPageModuleNgFactory\",(function(){return MessagesPageModuleNgFactory}));var MessagesPageModuleNgFactory=core.zb(MessagesPageModule,[],(function(_l){return core.Lb([core.Mb(512,core.m,core.kb,[[8,[router_ngfactory.a,MessagesPageNgFactory]],[3,core.m],core.D]),core.Mb(4608,common.m,common.l,[core.z,[2,common.z]]),core.Mb(4608,fesm2015_forms.p,fesm2015_forms.p,[]),core.Mb(4608,fesm5.b,fesm5.b,[core.F,core.g]),core.Mb(4608,fesm5.Jb,fesm5.Jb,[fesm5.b,core.m,core.w]),core.Mb(4608,fesm5.Nb,fesm5.Nb,[fesm5.b,core.m,core.w]),core.Mb(1073742336,common.b,common.b,[]),core.Mb(1073742336,fesm2015_forms.o,fesm2015_forms.o,[]),core.Mb(1073742336,fesm2015_forms.e,fesm2015_forms.e,[]),core.Mb(1073742336,fesm5.Gb,fesm5.Gb,[]),core.Mb(1073742336,router.o,router.o,[[2,router.t],[2,router.m]]),core.Mb(1073742336,MessagesPageRoutingModule,MessagesPageRoutingModule,[]),core.Mb(1073742336,MessagesPageModule,MessagesPageModule,[]),core.Mb(1024,router.k,(function(){return[[{path:\"\",component:MessagesPage}]]}),[])])}))}}]);","extractedComments":[]}
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"22TP":function(n,l,e){"use strict";e.r(l);var t=e("8Y7J");class o{}var u=e("pMnS"),s=e("oBZk"),r=e("SVse"),i=e("ZZ/e"),a=e("s7LF"),b=e("p74H"),c=e("CFL1");class g{constructor(n,l,e){this.statusBar=n,this.userService=l,this.router=e,this.segment="messages",this.user={},this.allNearbyPosts=[],this.allPosts=[],this.currentUser={},this.messages=[],this.messagesDB=[],this.realMessagesDB=[],this.blockedUsers=[],this.userService.currentUser.subscribe(n=>{this.user=n})}ngOnInit(){this.messageData()}ionViewDidLoad(){}messageData(){this.userService.messages.subscribe(n=>{this.messagesDB=n,this.realMessagesDB=n,console.log("messages ",n)})}getClass(n){return n.likes.indexOf(this.user.uid)>=0?"postLiked":"postNotLiked"}segmentChanged(n){}upgrade(){}getItems(n){let l=n.target.value;this.messagesDB=this.realMessagesDB.filter(n=>n.name.toLowerCase().indexOf(l.toLowerCase())>=0),0==l.length&&(this.messagesDB=Array.from(this.realMessagesDB))}openChat(n){this.router.navigateByUrl("/chat/?cid="+n.id+"&uid="+n.uid+"&name="+n.name)}parseText(n){return n.length>50?n.substring(0,99)+"...":n}getBorder(n){return n.read?"noBorder":"border"}timeDifference(n){var l=(new Date).getTime()-(n=new Date(n).getTime());return l<6e4?Math.round(l/1e3)+" secs":l<36e5?Math.round(l/6e4)+" mins":l<864e5?Math.round(l/36e5)+" hrs":l<2592e6?Math.round(l/864e5)+" days":l<31536e6?Math.round(l/2592e6)+" months":Math.round(l/31536e6)+" years"}}var d=e("iInd"),m=t.Ab({encapsulation:0,styles:[[".diag[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;height:76%;text-align:center}h2[_ngcontent-%COMP%]{margin-top:0!important}p[_ngcontent-%COMP%]{white-space:normal}.noBorder[_ngcontent-%COMP%]{border-left:3px solid #fff}.border[_ngcontent-%COMP%]{border-left:3px solid gray}.messageBox[_ngcontent-%COMP%]{padding:5px}.messageBox[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:teal}.messageBox[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:13px}.card-content-ios[_ngcontent-%COMP%], .card-content-md[_ngcontent-%COMP%]{padding:0!important;background-color:#525b56}.message[_ngcontent-%COMP%]{color:#f8f8f8!important;margin-bottom:10px;border-bottom:1px solid #ccc!important}.ptext[_ngcontent-%COMP%]{font-size:17px;line-height:20px;overflow:hidden;padding:0 20px}.ptext[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px!important;-o-object-fit:cover;object-fit:cover;border-radius:3px;width:100%;margin-top:10px;box-shadow:0 0 2px 0 rgba(0,0,0,.75)}.label-ios[_ngcontent-%COMP%], .label-md[_ngcontent-%COMP%]{margin-bottom:0}ion-card[_ngcontent-%COMP%]{box-shadow:none}.postLiked[_ngcontent-%COMP%]{color:#2574a9}.postNotLiked[_ngcontent-%COMP%]{color:#ccc}img[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;border-radius:3px!important}.feed[_ngcontent-%COMP%]{border-bottom:0 solid #ccc}"]],data:{}});function p(n){return t.Xb(0,[(n()(),t.Cb(0,0,null,null,3,"div",[["class","diag"]],null,null,null,null,null)),(n()(),t.Cb(1,0,null,null,0,"img",[["src","assets/imgs/speech-bubble.svg"],["style","padding: 30% 40% 0 40%;color: var(--ion-color-red);"]],null,null,null,null,null)),(n()(),t.Cb(2,0,null,null,1,"p",[["style","color:var(--ion-color-red)"]],null,null,null,null,null)),(n()(),t.Vb(-1,null,["You have no messages!"]))],null,null)}function h(n){return t.Xb(0,[(n()(),t.Cb(0,0,null,null,15,"ion-item",[["class","messageBox"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.openChat(n.context.$implicit)&&t),t}),s.fb,s.q)),t.Sb(512,null,r.u,r.v,[t.x,t.y,t.p,t.K]),t.Bb(2,278528,null,0,r.i,[r.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Bb(3,49152,null,0,i.J,[t.j,t.p,t.F],null,null),(n()(),t.Cb(4,0,null,0,2,"ion-avatar",[["slot","start"]],null,null,null,s.O,s.b)),t.Bb(5,49152,null,0,i.h,[t.j,t.p,t.F],null,null),(n()(),t.Cb(6,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),t.Cb(7,0,null,0,5,"ion-label",[],null,null,null,s.gb,s.t)),t.Bb(8,49152,null,0,i.P,[t.j,t.p,t.F],null,null),(n()(),t.Cb(9,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),t.Vb(10,null,["",""])),(n()(),t.Cb(11,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),t.Vb(12,null,["",""])),(n()(),t.Cb(13,0,null,0,2,"ion-note",[["slot","end"]],null,null,null,s.ib,s.v)),t.Bb(14,49152,null,0,i.ab,[t.j,t.p,t.F],null,null),(n()(),t.Vb(15,0,[" "," ago "]))],(function(n,l){n(l,2,0,"messageBox",l.component.getBorder(l.context.$implicit))}),(function(n,l){var e=l.component;n(l,6,0,l.context.$implicit.image),n(l,10,0,l.context.$implicit.name),n(l,12,0,l.context.$implicit.lastMessage);var t=e.timeDifference(l.context.$implicit.createdAt.toDate());n(l,15,0,t)}))}function C(n){return t.Xb(0,[(n()(),t.Cb(0,0,null,null,12,"ion-header",[["no-border",""]],null,null,null,s.ab,s.n)),t.Bb(1,49152,null,0,i.D,[t.j,t.p,t.F],null,null),(n()(),t.Cb(2,0,null,0,4,"ion-toolbar",[["color","red"],["style","padding-top:20px !important;"]],null,null,null,s.zb,s.M)),t.Bb(3,49152,null,0,i.Eb,[t.j,t.p,t.F],{color:[0,"color"]},null),(n()(),t.Cb(4,0,null,0,2,"ion-title",[],null,null,null,s.xb,s.K)),t.Bb(5,49152,null,0,i.Cb,[t.j,t.p,t.F],null,null),(n()(),t.Vb(-1,0,["Messages"])),(n()(),t.Cb(7,0,null,0,5,"ion-toolbar",[["color","red"],["mode","ios"]],null,null,null,s.zb,s.M)),t.Bb(8,49152,null,0,i.Eb,[t.j,t.p,t.F],{color:[0,"color"],mode:[1,"mode"]},null),(n()(),t.Cb(9,0,null,0,3,"ion-searchbar",[["mode","ios"],["showCancelButton","focus"]],null,[[null,"ionInput"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var o=!0,u=n.component;return"ionBlur"===l&&(o=!1!==t.Ob(n,12)._handleBlurEvent(e.target)&&o),"ionChange"===l&&(o=!1!==t.Ob(n,12)._handleInputEvent(e.target)&&o),"ionInput"===l&&(o=!1!==u.getItems(e)&&o),o}),s.lb,s.y)),t.Sb(5120,null,a.g,(function(n){return[n]}),[i.Pb]),t.Bb(11,49152,null,0,i.mb,[t.j,t.p,t.F],{mode:[0,"mode"],showCancelButton:[1,"showCancelButton"]},null),t.Bb(12,16384,null,0,i.Pb,[t.p],null,null),(n()(),t.Cb(13,0,null,null,7,"ion-content",[],null,null,null,s.U,s.h)),t.Bb(14,49152,null,0,i.w,[t.j,t.p,t.F],null,null),(n()(),t.rb(16777216,null,0,1,null,p)),t.Bb(16,16384,null,0,r.k,[t.X,t.S],{ngIf:[0,"ngIf"]},null),(n()(),t.Cb(17,0,null,0,3,"ion-list",[["mode","ios"]],null,null,null,s.hb,s.u)),t.Bb(18,49152,null,0,i.Q,[t.j,t.p,t.F],{mode:[0,"mode"]},null),(n()(),t.rb(16777216,null,0,1,null,h)),t.Bb(20,278528,null,0,r.j,[t.X,t.S,t.x],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var e=l.component;n(l,3,0,"red"),n(l,8,0,"red","ios"),n(l,11,0,"ios","focus"),n(l,16,0,0==e.messagesDB.length),n(l,18,0,"ios"),n(l,20,0,e.messagesDB)}),null)}var M=t.yb("app-messages",g,(function(n){return t.Xb(0,[(n()(),t.Cb(0,0,null,null,1,"app-messages",[],null,null,null,C,m)),t.Bb(1,114688,null,0,g,[b.a,c.a,d.m],null,null)],(function(n,l){n(l,1,0)}),null)}),{},{},[]);class f{}e.d(l,"MessagesPageModuleNgFactory",(function(){return B}));var B=t.zb(o,[],(function(n){return t.Lb([t.Mb(512,t.m,t.kb,[[8,[u.a,M]],[3,t.m],t.D]),t.Mb(4608,r.m,r.l,[t.z,[2,r.z]]),t.Mb(4608,a.p,a.p,[]),t.Mb(4608,i.b,i.b,[t.F,t.g]),t.Mb(4608,i.Jb,i.Jb,[i.b,t.m,t.w]),t.Mb(4608,i.Nb,i.Nb,[i.b,t.m,t.w]),t.Mb(1073742336,r.b,r.b,[]),t.Mb(1073742336,a.o,a.o,[]),t.Mb(1073742336,a.e,a.e,[]),t.Mb(1073742336,i.Gb,i.Gb,[]),t.Mb(1073742336,d.o,d.o,[[2,d.t],[2,d.m]]),t.Mb(1073742336,f,f,[]),t.Mb(1073742336,o,o,[]),t.Mb(1024,d.k,(function(){return[[{path:"",component:g}]]}),[])])}))}}]);